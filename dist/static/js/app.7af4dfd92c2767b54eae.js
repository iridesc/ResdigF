webpackJsonp([1],{"9M+g":function(e,t){},D93N:function(e,t){},Dan6:function(e,t){},E6bf:function(e,t){},Jmt5:function(e,t){},KaXi:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("7+uW"),o={name:"Test",props:["testData"],created:function(){setInterval(()=>{console.log("TEST",this.testData)},2e3)},methods:{},data:()=>({hello:"hello world!"})},n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("***********TEST*************")]),this._v(" "),t("h1",[this._v(this._s(this.hello))])])},staticRenderFns:[]};var r=s("VU/8")(o,n,!1,function(e){s("uSUO")},"data-v-7396d672",null).exports,i={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"susp"},[this._t("default")],2)},staticRenderFns:[]};var d=s("VU/8")({name:"SuspArea"},i,!1,function(e){s("QAFl")},"data-v-59e1a0f0",null).exports,l={name:"StatusBar",props:["tasks","engines"],data:()=>({})},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",{staticClass:"textCenter"},[s("b-row",[0!=e.tasks.length?s("b-col",e._l(e.tasks,function(t){return s("span",["Digging"==t.status?s("b-progress",[s("b-progress-bar",{attrs:{max:100,value:t.progress,animated:""}},[e._v(e._s(t.keyword))])],1):"Waiting"==t.status?s("b-badge",{attrs:{variant:"info",pill:""}},[e._v("\n          "+e._s(t.keyword+" "+t.status)+"\n        ")]):"Initing"==t.status?s("b-badge",{attrs:{variant:"secondary",pill:""}},[e._v("\n          "+e._s(t.keyword+" "+t.status)+"\n        ")]):e._e()],1)}),0):e._e(),e._v(" "),s("b-col",e._l(e.engines,function(t){return s("b-badge",{staticClass:"shadow",attrs:{variant:t.isActive?"success":"secondary",pill:""}},[e._v(e._s(t.name))])}),1)],1)],1)},staticRenderFns:[]};var u=s("VU/8")(l,c,!1,function(e){s("Dan6")},"data-v-1e00ea8c",null).exports,p=s("M4fF"),h=s.n(p),m={name:"GussList",props:["keyword"],watch:{keyword:function(e,t){this.guessList=["waiting inputing..."],this.debouncedGuess()}},created:function(){this.debouncedGuess=h.a.debounce(this.guess,1e3)},methods:{guess:function(){if(this.keyword.length>0){this.guessList=["Thinking..."];this.axios.get("j/subject_suggest/",{params:{q:this.keyword},headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8","Accept-Language":"zh-CN,zh;q=0.8"}}).then(e=>{console.log("*****************"),console.log(e.data)}).catch(e=>console.log("--------\n",e))}}},data:()=>({guessList:[]})},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"watch-example"}},e._l(e.guessList,function(t,a){return s("li",{key:a},[e._v(e._s(t))])}),0)},staticRenderFns:[]};var g={name:"DigBar",components:{GuessList:s("VU/8")(m,f,!1,function(e){s("jlKe")},"data-v-119f4e12",null).exports},props:["makeToast","resBoardData"],methods:{dig(){let e=this.keyword,t=this.userKeywords.indexOf(e);-1==t?this.userKeywords.unshift(e):(this.userKeywords.splice(t,1),this.userKeywords.unshift(e)),this.axios.post("/api/",{reason:"checkKeyword",keyword:e}).then(t=>{let s=t.data.status;if(console.log(s),"recorded"==s){let t="/movie/"+encodeURIComponent(e)+"/";window.location.href=t}else"digging"==s?(this.makeToast("Digging...",'"'+e+'"正在挖掘，请查看任务列表！',"info"),console.log(s)):"notRecord"==s?this.axios.post("/api/",{reason:"dig",keyword:e}).then(t=>{this.makeToast("Digging...",'"'+e+'"未收录，但已加入任务列表，请查看！',"info")}).catch(e=>this.makeToast("Warning!","似乎你的关键字无效！","warning")):makeToast("Error!","似乎出了点问题....","danger")}).catch(e=>console.log(e))}},computed:{checkKeyword:function(){return 0==this.keyword.length||this.keyword.length>50?(this.keywordValid=!1,this.keywordInvalidInfo="Keyword length must in the range of 1-50."):-1!=this.keyword.search(/\s\s+/)?(this.keywordValid=!1,this.keywordInvalidInfo="Keyword shall not contain continuous space."):-1!=this.keyword.search(/(^\s)|(\s$)/)?(this.keywordValid=!1,this.keywordInvalidInfo="Space shall not at the start/end of the keyword."):this.keywordValid=!0,this.keywordValid}},created:function(){console.log(this.$cookies.get("userKeywords")),this.$cookies.isKey("userKeywords")?this.userKeywords=JSON.parse(this.$cookies.get("userKeywords")):this.$cookies.set("userKeywords",JSON.stringify([]))},watch:{userKeywords:function(){this.$cookies.set("userKeywords",JSON.stringify(this.userKeywords))}},data:()=>({keyword:"",keywordValid:!1,keywordInvalidInfo:"",userKeywords:[]})},v={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-container",{staticClass:"textCenter"},[s("b-row",[s("b-col"),e._v(" "),s("b-col",{attrs:{sm:"10",md:"8",lg:"6"}},[s("h1",[s("a",{attrs:{href:"/"}},[e._v("Resdig")])]),e._v(" "),s("b-input-group",[s("b-form-input",{staticClass:"shadow",attrs:{state:e.checkKeyword,placeholder:"请输入关键词"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),0!=e.keyword.length?s("b-form-invalid-feedback",[e._v("\n          "+e._s(e.keywordInvalidInfo)+"\n        ")]):e._e(),e._v(" "),e.keywordValid?s("b-input-group-append",[s("b-button",{staticClass:"shadow",attrs:{variant:"success"},on:{click:e.dig}},[e._v("Dig")])],1):e._e()],1),e._v(" "),e._l(e.userKeywords,function(t){return s("b-badge",{staticClass:"speaceX",on:{click:function(s){e.keyword=t,e.dig()}}},[e._v("\n        "+e._s(t)+"\n      ")])})],2),e._v(" "),s("b-col")],1)],1)},staticRenderFns:[]};var y=s("VU/8")(g,v,!1,function(e){s("KaXi")},"data-v-55c1aa38",null).exports,_={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{},[s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:e.item.info,expression:"item.info"}],staticClass:"speaceX shadow",attrs:{variant:e.item.style,size:"sm",pill:""},on:{click:function(t){return e.item.act()}}},[e._v(e._s(e.item.info))])],1),e._v(" "),s("b-modal",{attrs:{id:e.item.info,title:e.item.info,scrollable:"",centered:"","button-size":"sm"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[e._t("modalFooter")]},proxy:!0}],null,!0)},[[e._t("modalContent")]],2)],1)},staticRenderFns:[]};var k=s("VU/8")({name:"ButtonAndModal",props:["item"]},_,!1,function(e){s("grIQ")},"data-v-24683ada",null).exports,w={name:"MsgBM",components:{ButtonAndModal:k},props:["msgs"],methods:{stirModal(){console.log("Msg clicked!"),this.ModalOn=!this.ModalOn},sendMsg(){console.log("send message!"),console.log(this.message)}},data(){return{msg:{info:"留言",act:this.stirModal,style:"info",modalOn:!1,data:this.msgs}}}},b={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ButtonAndModal",{attrs:{item:e.msg},scopedSlots:e._u([{key:"modalContent",fn:function(){return[s("b-table",{attrs:{striped:"",hover:"",items:e.msg.data}})]},proxy:!0}])})},staticRenderFns:[]};var x=s("VU/8")(w,b,!1,function(e){s("Q4bz")},"data-v-79c9a65a",null).exports,B={name:"SupBM",components:{ButtonAndModal:k},props:["donors"],methods:{stirModal(){console.log("Sup clicked!"),this.ModalOn=!this.ModalOn}},data(){return{sup:{info:"支持",act:this.stirModal,style:"info",modalOn:!0,data:this.donors}}}},M={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ButtonAndModal",{attrs:{item:e.sup},scopedSlots:e._u([{key:"modalContent",fn:function(){return[s("b-table",{attrs:{striped:"",hover:"",items:e.sup.data}})]},proxy:!0}])})},staticRenderFns:[]};var C=s("VU/8")(B,M,!1,function(e){s("qVtE")},"data-v-181e06fa",null).exports,D={name:"HelpBM",components:{ButtonAndModal:k},methods:{stirModal(){console.log("Help clicked!"),this.ModalOn=!this.ModalOn}},data(){return{help:{info:"幫助",act:this.stirModal,style:"info",modalOn:!1,loaded:!0,data:"mark down feld"}}}},R={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ButtonAndModal",{attrs:{item:e.help},scopedSlots:e._u([{key:"modalContent",fn:function(){return[e.help.loaded?s("div",[e._v(e._s(e.help.data))]):s("b-spinner",{attrs:{variant:"success",type:"grow",label:"Spinning"}})]},proxy:!0}])})},staticRenderFns:[]};var S=s("VU/8")(D,R,!1,function(e){s("ngtX")},"data-v-0f4d861a",null).exports,T={name:"MoreBM",components:{ButtonAndModal:k},methods:{stirModal(){console.log("More clicked!"),this.ModalOn=!this.ModalOn}},data(){return{more:{info:"更多",act:this.stirModal,style:"info",modalOn:!1,loaded:!0,data:"MORE mark down feld"}}}},E={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ButtonAndModal",{attrs:{item:e.more},scopedSlots:e._u([{key:"modalContent",fn:function(){return[e.more.loaded?s("div",[e._v(e._s(e.more.data))]):s("b-spinner",{attrs:{variant:"success",type:"grow",label:"Spinning"}})]},proxy:!0}])})},staticRenderFns:[]};var V=s("VU/8")(T,E,!1,function(e){s("SpBX")},"data-v-3feb11c4",null).exports,A={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-card-group",{attrs:{columns:""}},e._l(e.hots,function(t){return s("b-card",{staticClass:"shadow round textCenter",attrs:{title:t.keyword,"img-alt":t.keyword,"img-top":"",tag:"article","bg-variant":"dark"}},[s("b-card-text",[e._v("\n      热度："+e._s(t.digTimes)+"\n      "),s("br"),e._v("\n    挖掘时间："+e._s(new Date(1e3*t.lastDigTime).toLocaleString())+"\n    ")]),e._v(" "),s("b-button",{attrs:{href:"/movie/"+t.keyword+"/",variant:"info"}},[e._v("\n      vist\n    ")])],1)}),1)},staticRenderFns:[]},O=s("VU/8")({name:"HotRec",props:["hots"]},A,!1,null,null,null).exports,K={name:"ResBoard",props:["resBoardData","makeToast"],methods:{redig(){this.axios.post("/api/",{reason:"dig",keyword:this.resBoardData.keyword}).then(e=>{let t=e.data;console.log(t),t.suc?(console.log("SUC"),this.makeToast("Success!",this.resBoardData.keyword+"已加入任务列表！","success")):"inTasks"==t.reason?this.makeToast("In tasks!",this.resBoardData.keyword+"已在任务列表！请关注任务列表！","info"):"timeLocked"==t.reason?this.makeToast("Rejected!",this.resBoardData.keyword+"上次挖掘据今还未超出一天！","warning"):"keywordInvalid"==t.reason?this.makeToast("Error!",this.resBoardData.keyword+"关键字无效！","danger"):this.makeToast("Error!",this.resBoardData.keyword+"未知的错误","danger")}).catch()},onCopySuc:function(e){this.makeToast("Success!","复制成功!","success")},onCopyError:function(e){alert("复制失败！请手动复制：\n"+e.text)}},created:function(){let e=[],t=0,s=1;this.resBoardData.ress.forEach(e=>{0!=e.filesize&&(t+=e.filesize,s+=1)});let a=t/s;for(let t=0;t<this.resBoardData.ress.length;t++){const s=this.resBoardData.ress[t];let o,n,r,i;s.tags=[],o=(1+(s.filesize-a)/a)/2,s.tags.push({color:"warning",name:0==s.filesize?" 未知大小":(s.filesize/1024).toFixed(2)+"GB"}),null!=s.filename?(s.filename.indexOf("1080p")>-1||s.filename.indexOf("BD1920")>-1?(n=.8,s.tags.push({color:"primary",name:"1080p"})):s.filename.indexOf("720p")>-1||s.filename.indexOf("BD1280")>-1?(n=.6,s.tags.push({color:"success",name:"720p"})):s.filename.indexOf("480p")>-1?(n=.4,s.tags.push({color:"secondary",name:"HD1280"})):n=.2,s.filename.indexOf("BluRay")>-1?(r=1,s.tags.push({color:"primary",name:"BluRay"})):r=0,s.filename.indexOf("DTS-HD")>-1?(i=1,s.tags.push({color:"info",name:"DTS-HD"})):s.filename.indexOf("DTS")>-1?(i=.7,s.tags.push({color:"info",name:"DTS"})):s.filename.indexOf("DD5.1")>-1?(i=.5,s.tags.push({color:"info",name:"Dolby"})):i=0):(i=0,n=0,r=0),s.total_score=100*(.45*n+.1*i+.3*o+.15*r),e.push(s)}e.sort(function(e,t){return t.total_score-e.total_score});for(let t=0;t<e.length;t++){const s=e[t];s.jump=function(){window.open(s.web)},this.sortedRess.HQR50.count<50&&(s._rowVariant="info",this.sortedRess.HQR50.ress.push(s),this.sortedRess.HQR50.count+=1),"thunder"==s.type?(s._rowVariant="primary",this.sortedRess.thunder.ress.push(s),this.sortedRess.thunder.count+=1):"magnet"==s.type?(s._rowVariant="success",this.sortedRess.magnet.ress.push(s),this.sortedRess.magnet.count+=1):"ed2k"==s.type?(s._rowVariant="info",this.sortedRess.ed2k.ress.push(s),this.sortedRess.ed2k.count+=1):console.log("unknow type")}},data:()=>({textForCopy:"",fields:[{key:"Filename",sortable:!0},{key:"Size&Tech",sortable:!0},"Action"],sortedRess:{HQR50:{type:"HQR-50",ress:[],count:0},magnet:{type:"magnet",ress:[],count:0},ed2k:{type:"ed2k",ress:[],count:0},thunder:{type:"thunder",ress:[],count:0}}})},F={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"textCenter"},[s("b-container",{staticClass:" round shadow"},[s("b-row",{staticClass:"shadow round"},[s("b-col",[s("h1",{staticClass:"speace "},[e._v(e._s(e.resBoardData.keyword))])]),e._v(" "),s("b-col",[s("b-button",{staticClass:"shadow speace",attrs:{pill:"",size:"sm",variant:"success"},on:{click:e.redig}},[e._v("redig")])],1)],1),e._v(" "),s("br"),e._v(" "),s("b-row",e._l(e.sortedRess,function(t){return t.ress.length>0?s("b-col",{attrs:{sm:"auto",md:"auto",lg:"6",xl:"6"}},[s("h3",[e._v(e._s(t.type+" : ")+" "+e._s(t.ress.length))]),e._v(" "),s("b-table",{staticClass:"shadow",attrs:{"head-variant":"dark",fixed:"",striped:"",hover:"","sticky-header":"800px",items:t.ress,fields:e.fields},scopedSlots:e._u([{key:"cell(Action)",fn:function(t){return[s("b-button",{staticClass:"speaceX shadow",attrs:{variant:"secondary",size:"sm",pill:""},on:{click:function(e){return t.item.jump()}}},[e._v("原址")]),e._v(" "),s("b-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.item.link,expression:"data.item.link",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopySuc,expression:"onCopySuc",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onCopyError,expression:"onCopyError",arg:"error"}],staticClass:"speaceX shadow",attrs:{variant:"success",size:"sm",pill:""}},[e._v("复制")])]}},{key:"cell(Filename)",fn:function(t){return[s("p",{staticStyle:{"word-break":"break-all"}},[e._v("\n              "+e._s(t.index+1+":")+e._s(null==t.item.filename?t.item.link.slice(0,40)+"...":t.item.filename.slice(0,40)+"...")+"\n            ")])]}},{key:"cell(Size&Tech)",fn:function(t){return e._l(t.item.tags,function(t){return s("b-badge",{staticClass:"shadow",attrs:{variant:t.color}},[e._v(e._s(t.name))])})}}],null,!0)})],1):e._e()}),1)],1)],1)},staticRenderFns:[]};var $={name:"cp",methods:{onCopy:function(e){alert("You just copied: "+e.text)},onError:function(e){alert("Failed to copy texts")}},data:()=>({message:"Copy These Text"})},L={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container"},[t("button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:this.message,expression:"message",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:this.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:this.onError,expression:"onError",arg:"error"}],attrs:{type:"button"}},[this._v("Copy!")])])},staticRenderFns:[]},U={name:"App",components:{Test:r,SuspArea:d,StatusBar:u,DigBar:y,MsgBM:x,SupBM:C,HelpBM:S,MoreBM:V,HotRec:O,ResBoard:s("VU/8")(K,F,!1,function(e){s("E6bf")},"data-v-b10c9a76",null).exports,cp:s("VU/8")($,L,!1,null,null,null).exports},created:function(){this.appLoadingValue=5;let e=this.$cookies.get("csrftoken");this.axios.interceptors.request.use(function(t){return"post"==t.method&&(t.headers["X-CSRFToken"]=e),t},function(e){return Promise.reject(e)}),this.appLoadingValue=33;let t=document.location.toString().split("//")[1].split("/");if("movie"==t[1]){let e=decodeURIComponent(t[2]);window.title="Resdig-"+e,this.axios.post("/api/",{reason:"getRess",keyword:e}).then(t=>{let s=t.data;s.suc?(this.resBoardData.ress=s.ress,this.resBoardData.keyword=e):this.loadError=!0}).catch(e=>{this.loadError=!0})}this.appLoadingValue=50,this.loadError||(this.axios.post("/api/",{reason:"getStaticData"}).then(e=>{this.casts=e.data.casts,this.hots=e.data.hots,this.donors=e.data.donors,this.resAmount=e.data.resAmount,this.keywordAmount=e.data.keywordAmount}).catch(e=>this.loadError=!0),this.appLoadingValue=66),this.loadError||setInterval(()=>{this.axios.post("/api/",{reason:"getDynamicData"}).then(e=>{this.tasks=e.data.tasks,this.engines=e.data.engines,this.msgs=e.data.msgs}),this.appLoadingValue=100},2500)},mounted(){document.querySelector("body").setAttribute("class","bg textColor")},methods:{makeToast(e,t,s=null){this.$bvToast.toast(t,{title:e,variant:s,solid:!0})}},data:()=>({appLoadingValue:0,appLoadMax:100,loadError:!1,casts:[],hots:[],donors:[],resAmount:0,keywordAmount:0,engines:[],msgs:[],tasks:[],resBoardData:{keyword:"",ress:[]}})},I={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.loadError?s("div",{staticClass:"textCenter",attrs:{id:"app"}},[s("h1",{staticStyle:{color:"red"}},[e._v("Load Error !")]),e._v(" "),e._m(0)]):e.appLoadingValue<100?s("div",{attrs:{id:"app"}},[s("div",{staticClass:" pageCenter textCenter speace"},[s("h1",[e._v("Loading...")]),e._v(" "),s("b-progress",{attrs:{value:e.appLoadingValue,max:e.appLoadMax,animated:""}})],1)]):s("div",{attrs:{id:"app"}},[s("StatusBar",{attrs:{tasks:e.tasks,engines:e.engines}}),e._v(" "),s("DigBar",{staticClass:"speaceY",attrs:{makeToast:e.makeToast,resBoardData:e.resBoardData}}),e._v(" "),""!=e.resBoardData.keyword?s("ResBoard",{attrs:{makeToast:e.makeToast,resBoardData:e.resBoardData}}):e._e(),e._v(" "),s("HotRec",{staticClass:"speace",attrs:{hots:e.hots}}),e._v(" "),s("SuspArea",{scopedSlots:e._u([{key:"default",fn:function(){return[s("MsgBM",{attrs:{msgs:e.msgs}}),e._v(" "),s("SupBM",{attrs:{donors:e.donors}}),e._v(" "),s("HelpBM"),e._v(" "),s("MoreBM")]},proxy:!0}])})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{},[this._v("\n    Try refresh later / go to\n    "),t("a",{attrs:{href:"/"}},[this._v("homepage")])])}]};var z=s("VU/8")(U,I,!1,function(e){s("D93N")},null,null).exports,H=s("/ocq");a.default.use(H.a);var N=new H.a({routes:[{path:"/",name:"Resdig",component:z}]}),Q=s("mtWM"),X=s.n(Q),j=s("Rf8U"),q=s.n(j),G=s("ppUw"),W=s.n(G),J=s("Tqaz"),P=(s("Jmt5"),s("9M+g"),s("wvfG")),Y=s.n(P);a.default.use(Y.a),a.default.use(W.a),a.default.use(q.a,X.a),a.default.use(J.a),a.default.config.productionTip=!1,new a.default({el:"#app",router:N,components:{App:z},template:"<App/>"})},Q4bz:function(e,t){},QAFl:function(e,t){},SpBX:function(e,t){},grIQ:function(e,t){},jlKe:function(e,t){},ngtX:function(e,t){},qVtE:function(e,t){},uSUO:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.7af4dfd92c2767b54eae.js.map